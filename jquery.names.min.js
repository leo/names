/* names v1 by @leo */

(function(e){e.fn.names=function(t){var n={type:0,country:null,gender:null,complete:null};var r=this.length,i=this;var s="http://api.uinames.com/?amount="+r;var o=JSON.parse(localStorage.getItem("names_info"));if(t){e.extend(n,t)}if(n.country||n.gender){e.each(n,function(e,t){if(t!==null&&e!=="complete"&&e!=="type"){s+="&"+e+"="+t}})}if(o.count!=r||o.country!=n.country||o.gender!=n.gender){e.ajax({dataType:"json",url:s,cache:false,complete:function(e,t){var i={count:r,country:n.country,gender:n.gender};localStorage.setItem("names_info",JSON.stringify(i));localStorage.setItem("names_cache",e.responseText)}})}var u=JSON.parse(localStorage.getItem("names_cache"));i.each(function(t,r){var s=u[t],o=n.type;var a=["name","surname","gender","country"];var f=e.inArray(o,a);if(f!=-1){var l=s[o]}else{if(o!=0&&f==-1){console.log('uinames: false type set for "'+i.selector+'"')}var l=s.name+" "+s.surname}e(this).html(l)});if(e.isFunction(n.complete)){n.complete.call(this)}return this}})(jQuery)
